<!DOCTYPE html>
<html>
<head>
  {% load static %}
  {% load custom_tags %}
  {% include "chlamdb/header.html" %}
  {% include "chlamdb/style_menu.html" %}

<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />

<link rel= "stylesheet" href="style_home.css">

</head>
{% include "chlamdb/menu.html" %}
<body>  
    <!-- Header-->

<div class="page" >

      <header class="masthead d-flex align-items-center" >
        <div class="header" id="page-top">
        <p class= "header-h1"> Hi, <br> your comparative database <br> is ready </br></p>
        <p class="header-h"><em>A customizable comparative genomics database</em></h3>
        <a class="btn btn-primary btn-xl" href="#about">Find Out More</a>
        </div>
      </header>
  
      <div id= "home" class="search-bar"   >    
        <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
          <div class="input-group" >
            <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
              <div class="input-group-btn">
                  <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
              </div>
          </div>
        </form>
      </div>
            <div class="home-title"  ><b> Home </b></div>
          <hr class="lines-home">
            <p class="subtitle-home"> The database contains X genomes</p>
                  <div id="my-tab-content" class="tab-content"  >
                    <div class="panel panel-default">
                        <div class="panel-heading"><h3 class="panel-title">Status of your database</h3></div>
                         <div class="panel-body">
                            <font size="3">
                              <p> Your database has been generated including the following features:</p>
                                <ul style="list-style-type:circle; margin-left: 2em;">
                                    {% if optional2status|keyvalue:"BLAST_database"%}
                                    <li> Blast database of the genomes have been created</li>
                                    {% endif %}
                                    <li> Orthologous proteins identified with OrthoFinder </li>
                                      <li> Detailed annotation of proteins based on:
                                        
                                          {% if optional2status|keyvalue:"COG" == 1 %}
                                          <dd> -<a href="https://www.ncbi.nlm.nih.gov/COG/">COG</a> (clusters of orthologous groups)</dd> 
                                          {% endif %}
                                          {% if optional2status|keyvalue:"pfam" == 1 %}
                                          <dd> -<a href="http://pfam.xfam.org" >Pfam</a> (protein families)</dd>
                                          {% endif %}
                                          {% if optional2status|keyvalue:"KEGG" == 1 %}
                                          <dd> - <a href="https://www.genome.jp/kegg/" >KEGG</a> (Kegg orthologs)</dd>
                                          {% endif %}
                                          <dd> - <a href="https://www.uniprot.org/">SwissProt</a> (manually annotated proteins)</dd>
                                        
                                      <li> Precomputed phylogenetic reconstructions of orthologous groups</dd>
                                      {% if optional2status|keyvalue:"KEGG" %}
                                      <li> Kegg maps visualization</li>
                                      {% endif %}
                                      <li> Genomes alignments can be visualized with Circos and selected regions can be plotted and compared
                                  </li>
                                </ul>
                                <div class="warnings" style="color: red;" >
                                  <p> The following feature has not beed included, if whished please run again the pipeline with the corrected setting:</p>
                                    <li style="list-style-type:circle; margin-left: 4em;"> Protein annotation with:
                                      {% if not optional2status|keyvalue:"COG" == 1 %}
                                              <dd> -<a href="https://www.ncbi.nlm.nih.gov/COG/">COG</a> (clusters of orthologous groups)</dd> 
                                              {% endif %}
                                              {% if not optional2status|keyvalue:"pfam" == 1 %}
                                              <dd> -<a href="http://pfam.xfam.org" >Pfam</a> (protein families)</dd>
                                              {% endif %}
                                              {% if not optional2status|keyvalue:"KEGG" == 1 %}
                                              <dd> - <a href="https://www.genome.jp/kegg/" >KEGG</a> (Kegg orthologs)</dd>
                                              {% endif %}
                                              {% if not optional2status|keyvalue:"KEGG" %}
                                              <li> Kegg maps visualization</li>
                                              {% endif %}
                                    </li>
                                </div>      
                            </font>
                         </div>
                         </div>
                           <div id="Citation" ></div>
                          <div class="panel panel-default">
                            <div class="panel-heading"><h3 class="panel-title">Citation</h3></div>
                                <div class="panel-body" style="margin: 1em 1em 1em 1em; font-size:1em" id="Citation">
                                  
                                  <a href="https://academic.oup.com/nar/advance-article-abstract/doi/10.1093/nar/gkz924/5609527"> <strong> ChlamDB: a comparative genomics database of the phylum <i>Chlamydiae</i> and other members of the <i>Planctomycetes-Verrucomicrobiae-Chlamydiae</i> superphylum </strong></br>
                                  Trestan Pillonel, Florian Tagini, Claire Bertelli, Gilbert Greub </br>
                                  Nucleic Acids Research, 2019, https://doi.org/10.1093/nar/gkz924 </a>
                                </div>
                              </div>
                            </div>
                          
                          <div id= "Genomes" class="search-bar"   >    
                            <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
                              <div class="input-group" >
                                <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
                                  <div class="input-group-btn">
                                      <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                  </div>
                              </div>
                            </form>
                          </div>
                          

                          <div class="home-title"><b> Genomes </b></div>
                          <hr class="lines-home">
                         
                            <div class="tab-pane" id="genomes">
                                  <table class="display" id="genomes_table" >
                                    <thead>
                                      <tr>
                                        {% for header in data_table_header %}
                                        <th>{{header}}</th>
                                        {% endfor %}
                                      </tr>
                                    </thead>
                                      <tbody>
                                          {% for entry in data_table %}
                                            <tr>
                                              {% for val in entry %}
                                              <td>{{val}}</td>
                                              {% endfor %}
                                            </tr>
                                              {% endfor %}
                                          </tbody>
                                  </table>
                                </div>
                             
                           
                              <div id="Phylogeny" class="search-bar"   >    
                                <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
                                  <div class="input-group" >
                                    <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
                                      <div class="input-group-btn">
                                          <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                      </div>
                                  </div>
                                </form>
                              </div>
                              
                              <div class="home-title"  ><b> Phylogeny </b></div>
                              <hr class="lines-home">
                              
                                  
                                    <object class="tree" type="image/svg+xml" data="{% static asset_path %}" style="width:100%; "></object>
                                  
                                    <a download="profile.svg" class="btn" href="{% static asset_path %}"><i class="fa fa-download"></i> Download SVG</a>
                                    <a onclick='exportPNG("pyhlogeny", "phylogeny");' class="btn" id="png_button"><i class="fa fa-download"></i> Download PNG</a>
                                    <div class="help-par">
                                      <div class="panel panel-success" >
                                      <div class="panel-heading" >
                                        <h3 class="panel-title">Help</h3>
                                      </div>
                                          <p style="padding: 1em 2em 0em 2em;  line-height: 160% ; width:100%" >The phylogeny was build based on concatenated single copy orthologs with FastTree (default parameters). Nodes with black dots have support values lower than 1. 
                                                                    The percentage of non-coding DNA of fragmented genomes was calculated based on data from contigs larger than 10 kilo bases. The completeness and contamination of each genome were estimated with <a href="https://ecogenomics.github.io/CheckM/">checkM</a> based on the identification of 104 "universal" marker genes.</p>
                                              </p>
                                        </div>
                                  </div>
       </header>   

      



  {% include "chlamdb/style_menu.html" %}
</div>

    
    <!-- 
  
      <main>
       <div class="container-fluid" id="main_container" >
          <div class="row gx-4 gx-lg-5 justify-content-center">
             <div class="col-lg-12"  style="font: central;">
                 <div class="row">
                              <div id="page-content-wrapper">

          

                                              <p class="content-section bg-light" id="home">
                          
                                                <div id= "bar" class="col-sm-3 col-md-4 col-lg-5"   >    
                                                  <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
                                                    <div class="input-group" >
                                                      <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
                                                        <div class="input-group-btn">
                                                            <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                                        </div>
                                                    </div>
                                                  </form>
                                                </div>

                                                              <p style="font-size: 3em; text-align: center; color:#196d87;; margin-top: 2em; "><b> Home </b></p>
                                                                <center><hr style="height:2px;border-width:0;colorrgb(240, 215, 72);background-color:#196d87; width: 70%;"></center>
                                                                <p style="font-size: 1.5em; text-align: center; color:#196d87;; margin-top: 1em;"> The database contains X genomes</p>
                                                                      <div id="my-tab-content" class="tab-content"  >
                                                                        <div class="panel panel-default">
                                                                            <div class="panel-heading"><h3 class="panel-title">Status of your database</h3></div>
                                                                            <div class="panel-body" style="margin: 1em 1em 1em 1em; font-size:3em">
                                                                                <font size="3">
                                                                                  <p> Your database has been generated including the following features:</p>
                                                                                    <ul style="list-style-type:circle; margin-left: 2em;">
                                                                                        {% if optional2status|keyvalue:"BLAST_database"%}
                                                                                        <li> Blast database of the genomes have been created</li>
                                                                                        {% endif %}
                                                                                        <li> Orthologous proteins identified with OrthoFinder </li>
                                                                                          <li> Detailed annotation of proteins based on:
                                                                                            
                                                                                              {% if optional2status|keyvalue:"COG" == 1 %}
                                                                                              <dd> -<a href="https://www.ncbi.nlm.nih.gov/COG/">COG</a> (clusters of orthologous groups)</dd> 
                                                                                              {% endif %}
                                                                                              {% if optional2status|keyvalue:"pfam" == 1 %}
                                                                                              <dd> -<a href="http://pfam.xfam.org" >Pfam</a> (protein families)</dd>
                                                                                              {% endif %}
                                                                                              {% if optional2status|keyvalue:"KEGG" == 1 %}
                                                                                              <dd> - <a href="https://www.genome.jp/kegg/" >KEGG</a> (Kegg orthologs)</dd>
                                                                                              {% endif %}
                                                                                              <dd> - <a href="https://www.uniprot.org/">SwissProt</a> (manually annotated proteins)</dd>
                                                                                            
                                                                                          <li> Precomputed phylogenetic reconstructions of orthologous groups</dd>
                                                                                          {% if optional2status|keyvalue:"KEGG" %}
                                                                                          <li> Kegg maps visualization</li>
                                                                                          {% endif %}
                                                                                          <li> Genomes alignments can be visualized with Circos and selected regions can be plotted and compared
                                                                                      </li>
                                                                                    </ul>
                                                                                    <div class="warnings" style="color: red;" >
                                                                                      <p> The following feature has not beed included, if whished please run again the pipeline with the corrected setting:</p>
                                                                                        <li style="list-style-type:circle; margin-left: 4em;"> Protein annotation with:
                                                                                          {% if not optional2status|keyvalue:"COG" == 1 %}
                                                                                                  <dd> -<a href="https://www.ncbi.nlm.nih.gov/COG/">COG</a> (clusters of orthologous groups)</dd> 
                                                                                                  {% endif %}
                                                                                                  {% if not optional2status|keyvalue:"pfam" == 1 %}
                                                                                                  <dd> -<a href="http://pfam.xfam.org" >Pfam</a> (protein families)</dd>
                                                                                                  {% endif %}
                                                                                                  {% if not optional2status|keyvalue:"KEGG" == 1 %}
                                                                                                  <dd> - <a href="https://www.genome.jp/kegg/" >KEGG</a> (Kegg orthologs)</dd>
                                                                                                  {% endif %}
                                                                                                  {% if not optional2status|keyvalue:"KEGG" %}
                                                                                                  <li> Kegg maps visualization</li>
                                                                                                  {% endif %}
                                                                                        </li>
                                                                                    </div>      
                                                                                </font>
                                                                            </div>
                                                                            </div>
                                                                        </div>
                                                                      </div>
                                                                        <div id="my-tab-content" class="tab-content" id="Citation" >
                                                                          <div class="panel panel-default" style="margin: 1em 1em 1em 1em">
                                                                            <div class="panel-heading"><h3 class="panel-title">Citation</h3></div>
                                                                                <div class="panel-body" style="margin: 1em 1em 1em 1em; font-size:1em" id="Citation">
                                                                                  
                                                                                  <a href="https://academic.oup.com/nar/advance-article-abstract/doi/10.1093/nar/gkz924/5609527"> <strong> ChlamDB: a comparative genomics database of the phylum <i>Chlamydiae</i> and other members of the <i>Planctomycetes-Verrucomicrobiae-Chlamydiae</i> superphylum </strong></br>
                                                                                  Trestan Pillonel, Florian Tagini, Claire Bertelli, Gilbert Greub </br>
                                                                                  Nucleic Acids Research, 2019, https://doi.org/10.1093/nar/gkz924 </a>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                       
                  
         
                                              </p>               
                                                            <p class="content-section bg-light" id="Genomes">
                                                                  <div id= "bar" class="col-sm-3 col-md-4 col-lg-5"   >    
                                                                    <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
                                                                      <div class="input-group" >
                                                                        <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
                                                                          <div class="input-group-btn">
                                                                              <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                                                          </div>
                                                                      </div>
                                                                    </form>
                                                                  </div>
                                                                   <div id="my-tab-content" class="tab-content"  ></div>
                                                                          <p style="font-size: 3em; text-align: center; color:#196d87; margin-top: 2em;"><b> Genomes </b></p>
                                                                          <center><hr style="height:2px;border-width:0;colorrgb(240, 215, 72);background-color:#196d87; width: 70%;"></center>
                                                                                <div class="tab-pane" id="genomes" style=" padding: 1em 10em 0em 10em; width: 100%;">
                                                                                  <div class="col-lg-12 col-md-10 col-sm-6" >
                                                                                      <table class="display" id="genomes_table" >
                                                                                        <thead>
                                                                                          <tr>
                                                                                            {% for header in data_table_header %}
                                                                                            <th>{{header}}</th>
                                                                                            {% endfor %}
                                                                                          </tr>
                                                                                        </thead>
                                                                                          <tbody>
                                                                                              {% for entry in data_table %}
                                                                                                <tr>
                                                                                                  {% for val in entry %}
                                                                                                  <td>{{val}}</td>
                                                                                                  {% endfor %}
                                                                                                </tr>
                                                                                                  {% endfor %}
                                                                                              </tbody>
                                                                                      </table>
                                                                                    </div>
                                                                                  </div> 
                                                                                </div>
                                                                    </div>
                                                           </p>          
                                                                      <p class="content-section bg-light" id="Phylogeny">
                                                                        <div id= "bar" class="col-sm-3 col-md-4 col-lg-5"   >    
                                                                          <form class="navbar-form" role="search" action='{% url "search_bar" %}' method="GET"  >
                                                                            <div class="input-group" >
                                                                              <input type="text" class="form-control" placeholder="Gene, product, orthogroup, COG, KEGG id, ..." name="accession">
                                                                                <div class="input-group-btn">
                                                                                    <button class="btn btn-default"   type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                                                                </div>
                                                                            </div>
                                                                          </form>
                                                                        </div>
                                                                        <p style="font-size: 3em; text-align: center; color:#196d87; margin-top: 2em;"><b> Phylogeny </b></p>
                                                                        <center><hr style="height:2px;border-width:0;colorrgb(240, 215, 72);background-color:#196d87; width: 70%;"></center>
                    
                                                                          
                                                                              
                                                                    
                                                                    
                                                                        <div class= 'img'>
                                                                          <object type="image/svg+xml" data="{% static asset_path %}" style="width:100%; "></object>
                                                                        </div>
                                                                          <a download="profile.svg" class="btn" href="{% static asset_path %}"><i class="fa fa-download"></i> Download SVG</a>
                                                                          <a onclick='exportPNG("pyhlogeny", "phylogeny");' class="btn" id="png_button"><i class="fa fa-download"></i> Download PNG</a>
                                                                          <div class="panel panel-success" style="  width:100%;">
                                                                          <div class="panel-heading" style="width:100%; ">
                                                                            <h3 class="panel-title">Help</h3>
                                                                          </div>
                                                                              <p style="padding: 1em 10em 0em 10em; width; line-height: 160% ; width:100%" >The phylogeny was build based on concatenated single copy orthologs with FastTree (default parameters). Nodes with black dots have support values lower than 1. 
                                                                                                        The percentage of non-coding DNA of fragmented genomes was calculated based on data from contigs larger than 10 kilo bases. The completeness and contamination of each genome were estimated with <a href="https://ecogenomics.github.io/CheckM/">checkM</a> based on the identification of 104 "universal" marker genes.</p>
                                                                                  </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                            </p>            
                                                      

                                                                      <script>
                                                                        var coll = document.getElementsByClassName("collapsible");
                                                                        var i;
                                                                        
                                                                        for (i = 0; i < coll.length; i++) {
                                                                          coll[i].addEventListener("click", function() {
                                                                            this.classList.toggle("active");
                                                                            var content = this.nextElementSibling;
                                                                            if (content.style.display === "block") {
                                                                              content.style.display = "none";
                                                                            } else {
                                                                              content.style.display = "block";
                                                                            }
                                                                          });
                                                                        }
                                                                    </script>
                                                            </p>
                                           </div>   
                                        </div>
                                 </div>
                              </div>
                         </div>        
                     </div> 
      </main>
{% include "chlamdb/style_menu.html" %}



</body>

</html>
           
                                                            <script>
                                                              $(document).ready(function() {
                                                        
                                                              // Javascript to enable link to tab
                                                              var url = document.location.toString();
                                                              if (url.match('#')) {
                                                                  $('.nav-tabs a[href="#' + url.split('#')[1] + '"]').tab('show');
                                                              } 
                                                        
                                                              // Change hash for page-reload
                                                              $('.nav-tabs a').on('shown.bs.tab', function (e) {
                                                                  window.location.hash = e.target.hash;
                                                              })
                                                        
                                                              $('#genomes_table').DataTable( {
                                                              dom: 'Bfrtip',
                                                              "paging":   true,
                                                              "ordering": true,
                                                              "info":     false,
                                                              buttons: [
                                                                {
                                                                    extend: 'excel',
                                                                    title: 'interaction_table'
                                                                },
                                                                {
                                                                    extend: 'csv',
                                                                    title: 'interaction_table'
                                                                }
                                                              ],
                                                              } );
                                                              } );
                                                            $('.dropdown-toggle').dropdown()
                                                            </script>
