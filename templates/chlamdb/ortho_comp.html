<!DOCTYPE html>


<html>



<head>
    {% load static %}
    {% load static %}
    {% get_static_prefix as STATIC_PREFIX %}
    {% load custom_tags %}
    {% include "chlamdb/header.html" %}
</head>


<body>

  <div class="container-fluid" id="main_container">
    <div class="row">
      <div id="wrapper">
          <div id="page-content-wrapper">
            <div class="row">
              <div class="col-lg-12">
                 {% include "chlamdb/menu.html" %}
                 <div class="home-title"><b> Orthogroups </b></div>
             <hr class="lines-home">
                  <nav>
                      <ul id="tabs_main" class="nav nav-tabs">
                          <li><a href="{% url 'extract_orthogroup'  %}">Detailed comparison</a></li>
                          <li><a href="{% url 'venn_orthogroup'  %}">Venn diagram</a></li>
                          <li class="active"><a href="{% url 'orthogroup_comparison'  %}">Compare Orthogroups size</a></li>
                          <li><a href="{% url 'plot_heatmap'  'orthology' %}">Whole proteomes heatmaps</a></li>
                          <li><a href="{% url 'pan_genome'  'orthology' %}">Pan/Core genome plots</a></li>

                      </ul>
                  </nav>

                  <div class="panel panel-info" style="width:90% ; top: 200px; margin: 10px 10px 10px 10px">
                    <div class="panel-heading" style="width:100%">
                      <h3 class="panel-title">Info about the analysis    <a href="/docs/index.html" id="show-option" title="See an axample of the analysis you can perform"><i class="fab fa-info-circle fa-2x" style="size: 5em;" ></i></a></h3>
                    </div>
                    <p style="margin: 10px 10px 10px 10px; line-height: 180%">Compare the size of the orthogroup shared by the selected genomes (targets).</p>
                      </p>
                      </div>



                      <form action='{% url "orthogroup_comparison"  %}' method="post">
                          {% csrf_token %}
                          {{ form.as_p }}
                          <input type="submit" value="Submit" />

                      </form>

                      {% if envoi_comp %}

                      <div class="row" style="padding-top:30px ;background-color: rgba(245, 245, 245, 0.986); margin-top: 1em;" >
                        <div class="col-lg-8" style="margin-bottom: 2em;">
                         <center><h3 style="padding:0; color: rgb(0, 66, 97);">Size of shared Orthologous groups</h2></center>
                             <br>
                            
                  <h4> Number of shared orthogroups exhiniting more than 1 copy (in one ore multiple genomes) in at least 1 out of x selected genomes: {{n_orthogroups}} </h4>
                         <div class="panel panel-success">
                             <div class="panel-heading" style="width:100%">
                                 <h5 class="panel-title">Help to interpret the results</h5>
                             </div>
                             <p style="margin: 10px 10px 10px 10px">
                                The ouput table contains the number of homologs in the shared orthogroups of the selected genomes. Interesting for comparing the size of orthogroups within genomes.
                                <br> Homolog counts can be reordrered by clicking on column headers.<br>
                                <br>Click on Orthologous group to get all the homologs identified in the database and the phylogenetic profile. 
                             </p>
                         </div>
                        </div>
                     

                              <table class="sortable" id="mytable" style="width: 90%; margin-left: 1em; padding-top: 30em;">
                                  <style>
                                  table {
                                  width:100%;
                                  table-layout:fixed;
                                  }
                                  td {
                                  overflow: hidden;
                                  white-space: nowrap;
                                
                                  }
                                  </style>
                                  <thead>


                                    <tr>
                                        <th valign="bottom">Orthogroup</th>
                                        {% for genome in genomes_list %}
                                            <th id="entete_meta4" valign="bottom"><div class="rotate">{{genome}}</div></th>
                                        {% endfor %}
                                        <th valign="bottom">Annotation</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                  {% for items in og_data %}
                                      <tr> <td><a href="{% url 'orthogroup'  items.0 %}">{{items.0}}</a></td>
                                          {% for count in items.1%}
                                                {%if count != 0 %}
                                                <td data-hist="{{count}}">{{count}}</td>
                                                {% else %}
                                                 <td>{{count}}</td>
                                                {% endif %}
                                          {% endfor %}
                                          <td>
										  {{items.2|safe}}
                                          </td>
                                      </tr>
                              {% endfor %}
                              </tbody>
                              </table>



                      {% endif %}
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

<script src="{% static 'js/jquery.hottie.js' %}"></script>
<script>
$(function(){
$("#mytable td").hottie({
readValue : function(e) {
return $(e).attr("data-hist");
},
colorArray : [
"#5858FA",
"#FBEFEF",
"#FA5858"
]

});

});
</script>


<script>

$(document).ready(function() {
  $('#mytable').DataTable( {
    dom: 'lBfrtip',
    buttons: [
        {
            extend: 'colvis',
            columns: ':not(.noVis)',
        },
        {
            extend: 'excel',
            title: 'plast_refseq'
        },
        {
            extend: 'csv',
            title: 'plast_refseq'
        }
    ],
   
    "ordering": true,
    "info":     false,
    } );
} );

$(document).ready(function() {
$("#mytable").DataTable();} );

</script>

{% include "chlamdb/style_menu.html" %}
</html>
