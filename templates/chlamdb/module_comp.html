<!DOCTYPE html>


<html>



<head>
    {% load static %}
    {% load static %}
    {% get_static_prefix as STATIC_PREFIX %}
    {% load custom_tags %}

    {% include "chlamdb/header.html" %}

</head>
<body>

  <div class="container-fluid" id="main_container">
    <div class="row">
      <div id="wrapper">
          <div id="page-content-wrapper">
            <div class="row">
              <div class="col-lg-12">
                 {% include "chlamdb/menu.html" %}
                 <div class="panel-title"><b>Metabolism: Kegg modules </b></div>
                 <br>
                        <ul id="tabs_main" class="nav nav-tabs">
                            <li><a href="{% url 'kegg_module' %}">Category Heatmap</a></li>
                            <li><a href="{% url 'kegg_module_subcat' %}">Sub Category Heatmap</a></li>
                            <li class="active"><a href="{% url 'module_comparison' %}">Compare strains</a></li>
                        </ul>

                        <br>
                        <center><p class="home-title" style="color: rgb(0, 86, 121);"><b>Size of shared Kegg modules </b><a href="/docs/index.html" id="show-option" title="Compare the occurrences of the Kegg modules shared by the selected genomes"><i class="fab fa-info-circle " style="size: 5em;" ></i></a></p></center>

                    <form action='{% url "module_comparison" %}' method="post">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <input type="submit" value="Submit" />

                    </form>
                  </div>

                    {% if envoi_comp %}

                    <div class="panel panel-success" style="width:100%; top: 200px; margin-top: 1em; margin-bottom: 1em;">
                      <div class="panel-heading" style="width:100%">
                          <h3 class="panel-title">Hel to interpret the result</h3>
                      </div>
                      <p style="margin: 10px 10px 10px 10px"> 
                        The output consists of a table with Kegg module accession numbers that redirect you to the Kegg entries identified in the genomes, category description, subCategory description, and occurrences in the selected genomes.
                       
                        
                  </div>

                    <table class="table" id="table_modules" style="margin-top: 35em;">
                        <style>
                            table {
                                width:100%;
                                table-layout:fixed;
                            }
                            td {
                                overflow: hidden;
                                white-space: nowrap;
                            }


                        </style>
                          <thead class="header">
                              <tr>
								  {% for entry in header %}
								  <th> {{entry|safe}} </th>
								  {% endfor %}

                                  {% for taxon in taxons %}
                                      <th id="entete_meta4" valign="bottom"><div class="rotate">
									     {{ taxon}}</div>
									  </th>
                                  {% endfor %}
							  </tr>
                          </thead>
                          <body>
                              <tr>
								  {% for line in entries %}
                                  <tr>
                                  {% for value in line %}
								  		<td> {{value|safe}} </td>
                                  {% endfor %}
                                  </tr>
                              {% endfor %}
                          </tbody>
                        </table>
                    {% endif %}
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="{% static 'js/jquery.hottie.js' %}"></script>


</body>

<script>

  $(document).ready(function() {

    $("#table_modules td").hottie({
          readValue : function(e) {
            return $(e).attr("data-hist");
          },
        colorArray : [
            "#5858FA",
            "#FBEFEF",
            "#FA5858"
        ]
        });

        $('#table_modules').DataTable( {
        dom: 'Bfrtip',
        "paging":   false,
        "ordering": true,
        "info":     false,
        buttons: [

        {
            extend: 'colvis',
            columns: ':not(.noVis)',
        },

          {
              extend: 'excel',
              title: 'table_tcdb'
          },
          {
              extend: 'csv',
              title: 'table_tcdb'
          }
        ],
        "columnDefs": [
    { "width": "15", "targets": 2 },
    { "width": "15", "targets": 4 },
    { "width": "15", "targets": 5 },
    { "width": "15", "targets": 6 },
    { "width": "5", "targets": 7 },
    { "width": "5", "targets": 8 },
    { "width": "5", "targets": 9 },
    { "width": "5", "targets": 10 }
  ]        
        } );
        } );
  
  </script>

{% include "chlamdb/style_menu.html" %}
</html>
