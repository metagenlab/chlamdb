<!DOCTYPE html>


<html>



<head>
    {% load static %}
    {% load static %}
    {% get_static_prefix as STATIC_PREFIX %}
    {% load custom_tags %}

    {% include "chlamdb/header.html" %}

</head>
<body>

  <div class="container-fluid" id="main_container">
    <div class="row">
      <div id="wrapper">
          <div id="page-content-wrapper">
            <div class="row">
              <div class="col-lg-12">
                 {% include "chlamdb/menu.html" %}
                 <div class="home-title"><b> Kegg modules  </b></div>
                 <hr class="lines-home">
                   <nav>
                        <ul id="tabs_main" class="nav nav-tabs">
                            <li><a href="{% url 'kegg_module' %}">Category Heatmap</a></li>
                            <li><a href="{% url 'kegg_module_subcat' %}">Sub Category Heatmap</a></li>
                            <li class="active"><a href="{% url 'module_comparison' %}">Compare strains</a></li>
                        </ul>
                    </nav>
                    <div class="panel panel-success" style="width:80%; top: 200px; margin: 10px 10px 10px 10px">
                      <div class="panel-heading" style="width:100%">
                          <h3 class="panel-title">Help</h3>
                      </div>
                      <p style="margin: 10px 10px 10px 10px">  Compare the Kegg modules present among selected genomes. Detailed table with:
                        <br>- Category description  
                        <br>- SubCategory description
                        <br>- Kegg module accession number that redirect you to the Kegg entried identified in the genomes
                          <br>- Kegg module description
                          <br>- nKO = number of Ko entries reported in Kegg database for that Kegg module
                          <br>- nKO+ = number of Ko entries reported in Kegg database for that Kegg module <b>present</b> in the genomes
                          <br>- Percentage= nKO+ compared to nKO
                          <br>- Number of Ko entries fof each module in each genome of interest
                        
                  </div>
                    <form action='{% url "module_comparison" %}' method="post">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <input type="submit" value="Submit" />

                    </form>

                    {% if envoi_comp %}

                    <table class="table" id="table_modules">
                        <style>
                            table {
                                width:100%;
                                table-layout:fixed;
                            }
                            td {
                                overflow: hidden;
                                white-space: nowrap;
                            }

							.header th {
							  height: 250px;
							  line-height: 2px;
							}

                        </style>
                          <thead class="header">
                              <tr>
								  {% for entry in header %}
								  <th> {{entry|safe}} </th>
								  {% endfor %}

                                  {% for taxon in taxons %}
                                      <th id="entete_meta4" valign="bottom"><div class="rotate">
									     {{ taxon}}</div>
									  </th>
                                  {% endfor %}
							  </tr>
                          </thead>
                          <body>
                              <tr>
								  {% for line in entries %}
                                  <tr>
                                  {% for value in line %}
								  		<td> {{value|safe}} </td>
                                  {% endfor %}
                                  </tr>
                              {% endfor %}
                          </tbody>
                        </table>
                    {% endif %}
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="{% static 'js/jquery.hottie.js' %}"></script>


</body>

<script>

  $(document).ready(function() {

    $("#table_modules td").hottie({
          readValue : function(e) {
            return $(e).attr("data-hist");
          },
        colorArray : [
            "#5858FA",
            "#FBEFEF",
            "#FA5858"
        ]
        });

        $('#table_modules').DataTable( {
        dom: 'Bfrtip',
        "paging":   false,
        "ordering": true,
        "info":     false,
        buttons: [

        {
            extend: 'colvis',
            columns: ':not(.noVis)',
        },

          {
              extend: 'excel',
              title: 'table_tcdb'
          },
          {
              extend: 'csv',
              title: 'table_tcdb'
          }
        ],
        "columnDefs": [
    { "width": "15", "targets": 2 },
    { "width": "15", "targets": 4 },
    { "width": "15", "targets": 5 },
    { "width": "15", "targets": 6 },
    { "width": "5", "targets": 7 },
    { "width": "5", "targets": 8 },
    { "width": "5", "targets": 9 },
    { "width": "5", "targets": 10 }
  ]        
        } );
        } );
  
  </script>

{% include "chlamdb/style_menu.html" %}
</html>
