<!DOCTYPE html>


<html>
<div id="container">

    {% load static %}

    <div id="sidebar">
        {% include "chlamdb/menu.html" %}
    </div>

    <div id="header">
        {% include "chlamdb/user.html" %}

    </div>

    <div id="content">

            <nav>
                <ul id="tabs_main" class="nav nav-tabs">
                {% if type == 'Pfam' %}

                    <li><a href="{% url 'extract_pfam' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'venn_pfam' biodb %}">Venn diagram</a></li>
                    <li><a href="{% url 'pfam_comparison' biodb %}">Compare Pfam Domains</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'Pfam' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'Pfam' %}">Pan/Core genome plots</a></li>

                {% elif type == 'COG' %}
                    <li><a href="{% url 'extract_cog' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'venn_cog' biodb %}">Venn diagram</a></li>
                    <li><a href="{% url 'cog_barchart' biodb %}">COG categories barchart</a></li>
                    <li><a href="{% url 'COG_phylo_heatmap' biodb True %}">COG heatmap freq.</a></li>
                    <li><a href="{% url 'COG_phylo_heatmap' biodb False %}">COG heatmap counts</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'COG' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'COG' %}">Pan/Core genome plots</a></li>
                {% elif type == 'interpro'%}
                    <li><a href="{% url 'extract_interpro' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'venn_interpro' biodb %}">Venn diagram</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'interpro' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'interpro' %}">Pan/Core genome plots</a></li>
                {% elif type == 'EC' %}

                    <li><a href="{% url 'extract_EC' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'venn_pfam' biodb %}">Venn diagram</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'EC' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'EC' %}">Pan/Core genome plots</a></li>
                {% elif type == 'ko' %}
                    <li><a href="{% url 'extract_ko' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'ko_comparison' biodb %}">Compare KO counts</a></li>
                    <li><a href="{% url 'module_barchart' biodb %}">KO categories barchart</a></li>
                    <li><a href="{% url 'venn_ko' biodb %}">Venn KO</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'ko' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'ko' %}">Pan/Core genome plots</a></li>
                {% elif type == 'orthology' %}
                    <li><a href="{% url 'extract_orthogroup' biodb %}">Detailed comparison</a></li>
                    <li><a href="{% url 'venn_orthogroup' biodb %}">Venn diagram</a></li>
                    <li><a href="{% url 'orthogroup_comparison' biodb %}">Compare Orthogroups size</a></li>
                    <li class="active"><a href="{% url 'plot_heatmap' biodb 'orthology' %}">Whole proteomes heatmaps</a></li>
                    <li><a href="{% url 'pan_genome' biodb 'orthology' %}">Pan/Core genome plots</a></li>
                {% endif %}
                </ul>
            </nav>

        <div id="extract_form">
            <div class="panel panel-success" style="width:500px ; top: 200px; margin: 10px 10px 10px 10px">
                  <div class="panel-heading" style="width:100%">
                      <h3 class="panel-title">Help</h3>
                  </div>
                <p style="margin: 10px 10px 10px 10px">Hepatmap showing presence/absence of

                {% if type == 'Pfam' %}
                    Pfam domains.
                {% elif type == 'COG' %}
                    COG IDs.
                {% elif type == 'interpro'%}
                    Interpro Entries.

                {% elif type == 'EC' %}
                    EC numbers. Based on PRIAM data. Partial EC are not considered.
                {% elif type == 'ko' %}
                    Kegg orthologous groups (KO).
                {% elif type == 'orthology' %}
                    orthologous groups.
                {% endif %}



                </p>
            </div>


            <form action="{% url "plot_heatmap" biodb type %}" method="post">

                <div class="form-inline">
                    <div class="form-group">
                         <div class="col-md-11" style="width: 100%;">
                              <label style="width:380px;text-align:left;" >
                                  <input type="checkbox" id="id_checkbox_accessions" name="checkbox_accessions">
                                  Distinguish plasmids from chromosomes
                              </label>
                        </div>
                    </div>
                </div>


                {% csrf_token %}
                {{ form_venn.as_p }}
                <input type="submit" name="venn" value="Show" id="venn_button" />

            </form>

        </div>

     {% if envoi %}

        <img type="image/svg+xml" src="{% static asset_path %}" alt="heatmap" style="width:90%;">

    {% endif %}



    </div>

</div>
<div id="footer"></div>
<!--
<script type="text/javascript">$(document).ready( function(){ $("#jqtest").html("JQuery installed successfully!"); } ); </script>

-->

<script>
    $(document).ready(function() {
        /* no plasmids by default */
        var y=document.getElementById("id_targets");
        for (var i = 0; i < y.options.length; i++) {
            if (y.options[i].text.includes('plasmid')) {
                $("#id_targets").children("option[value^=" + y.options[i].value + "]").hide();
            } else {
                $("#id_targets").children("option[value^=" + y.options[i].value + "]").show()
            }
        }
    $("#id_checkbox_accessions").change(function() {
            var x = document.getElementById("id_targets");
            for (var i = 0; i < x.options.length; i++) {

                if (y.options[i].text.includes('plasmid')) {
                    if (document.getElementById('id_checkbox_accessions').checked) {
                        $("#id_targets").children("option[value^=" + y.options[i].value + "]").show()
                    } else {
                        $("#id_targets").children("option[value^=" + y.options[i].value + "]").hide()
                    }
                } else {
                    $("#id_targets").children("option[value^=" + y.options[i].value + "]").show()
                }
            }
    })

    })


</script>



<p id="jqtest"></p>

</body>
</html>
